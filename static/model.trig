# External prefix declarations
prefix foaf: <http://xmlns.com/foaf/0.1/>
prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix sh:   <http://www.w3.org/ns/shacl#>
prefix xsd:  <http://www.w3.org/2001/XMLSchema#>
prefix bibo: <http://purl.org/ontology/bibo/>
prefix dct:  <http://purl.org/dc/terms/>
prefix skos: <http://www.w3.org/2004/02/skos/core#>

# Project-specific prefix
prefix graph: <https://mcal.odissei.nl/graph/>
prefix shp:   <https://mcal.odissei.nl/schema/shp/>
prefix mcal: <https://mcal.odissei.nl/schema/>

mcal:model {
  # Journal shape, for now a journal is just a a node of type bibo:Journal
  #  with a title and ISSN.
  shp:Journal
    a sh:NodeShape ;
    sh:closed true ; 
    sh:ignoredProperties ( rdf:type );
    sh:property
      shp:title,
      shp:issn ;
    sh:targetClass bibo:Journal .

  # Articles are open ended
  shp:AcademicArticle
    a sh:NodeShape ;
    sh:closed false ; # set to true when this shape is complete
    sh:property
        shp:articlePartOfJournal ,
        shp:hasVersion ,
        shp:title ,
        shp:researchQuestionType ,
        shp:contentFeatureConcept ,
        shp:contentAnalysisType ;
    sh:targetClass bibo:AcademicArticle .
    
  # title property used for journals and articles
  shp:title 
    a sh:PropertyShape ;
    sh:datatype xsd:string ;
    sh:minCount 1 ; 
    sh:maxCount 1 ;
    sh:path dct:title .

  # ISSN property for journals
  shp:issn
    a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:nodeKind sh:IRI ;
    sh:path bibo:issn .

  # At the moment, every article needs to be published in a journal (debatable)
  shp:articlePartOfJournal
    a sh:PropertyShape ;
    sh:minCount 1;
    sh:maxCount 1;
    sh:nodeKind sh:IRI ;
    sh:path dct:isPartOf ;
    sh:class bibo:Journal .

  # Every article has at least one (online) version
  shp:hasVersion
    a sh:PropertyShape ;
    sh:minCount 1;
    sh:nodeKind sh:IRI ;
    sh:path dct:hasVersion .

  # Optional: Content Analysis Type values are based on a small SKOS vocabulary
  shp:contentAnalysisType
    a sh:PropertyShape ;
    sh:minCount 0;
    sh:nodeKind sh:IRI ;
    sh:class skos:Concept ; # Temp. disabled due to slow down in current ETL
    sh:path mcal:contentAnalysisType .

# Optional: Content Feature Concepts values are based on a small SKOS vocabulary
  shp:contentFeatureConcept
    a sh:PropertyShape ;
    sh:minCount 0;
    sh:nodeKind sh:IRI ;
    sh:class skos:Concept ; # Temp. disabled due to slow down in current ETL
    sh:path mcal:contentFeatureConcept .

  # Optional: Research Question Type values are based on a small SKOS vocabulary
  shp:researchQuestionType
    a sh:PropertyShape ;
    sh:minCount 0;
    sh:nodeKind sh:IRI ;
    sh:class skos:Concept ; # # Temp. disabled due to slow down in current ETL
    sh:path mcal:researchQuestionType .
}