# External prefix declarations
prefix foaf: <http://xmlns.com/foaf/0.1/>
prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix sh:   <http://www.w3.org/ns/shacl#>
prefix xsd:  <http://www.w3.org/2001/XMLSchema#>
prefix bibo: <http://purl.org/ontology/bibo/>
prefix dct:  <http://purl.org/dc/terms/>

# Project-specific prefix
prefix graph: <https://mcal.odissei.nl/graph/>
prefix shp:   <https://mcal.odissei.nl/schema/shp/>
prefix mcal: <https://mcal.odissei.nl/schema/>

mcal:model {
  # Journal shape, for now a journal is just a a node of type bibo:Journal
  #  with a title and ISSN.
  shp:Journal
    a sh:NodeShape ;
    sh:closed true ; 
    sh:ignoredProperties ( rdf:type );
    sh:property shp:title, shp:issn ;
    sh:targetClass bibo:Journal .

  # Articles are open ended
  shp:AcademicArticle
    a sh:NodeShape ;
    sh:closed false ; # set to true when this shape is complete
    sh:property
        shp:articlePartOfJournal ,
        shp:title ;
    sh:targetClass bibo:AcademicArticle .
    
  shp:title 
    a sh:PropertyShape ;
    sh:datatype xsd:string ;
    sh:minCount 1 ; 
    sh:maxCount 1 ;
    sh:path dct:title .

  shp:issn
    a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:nodeKind sh:IRI ;
    sh:path bibo:issn .

  shp:articlePartOfJournal
    a sh:PropertyShape ;
    sh:minCount 1;
    sh:maxCount 1;
    sh:nodeKind sh:IRI;
    sh:path dct:isPartOf ;
    sh:class bibo:Journal .
}
